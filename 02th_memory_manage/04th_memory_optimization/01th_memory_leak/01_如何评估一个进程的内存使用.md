【主题：如何评估一个进程的内存使用】

1，Linux内存使用宗旨
	跟CPU一样，在内存充足的时候，能用就用
	这样就可以提高程序的性能，加快程序运行效率，不用的时候就再回收。

2，free命令查看当前系统内存使用情况

	1）理解free获取到的数据

	kobey@pc:~$ free -m
	              total        used        free      shared  buff/cache   available
	Mem:           7910        2040        1022         214        4848        5358
	Swap:          2047          83        1964

	a	total,系统总共拥有可用的物理内存
	b	used，已经被使用的物理内存
	c	free，剩下真正意义上的，完全没有使用的物理内存
	d	shared，被共享使用的物理内存
	e	buff/cache，被buff和cache使用的物理内存
	f	available，系统当前认为应用程序还可以使用的物理内存

	Q1，free与available的区别
	A1，free是当前系统统计到真正没有任何程序使用的空闲的物理内存，而available是系统认为，如果
	有程序使用内存，这个程序可以使用的内存的大小。
	在大概的计算上，可以认为available等于内存空闲的总的容量，也等于free+cache+buff。

	内存在实际运行中用不了太多，更多的是缓存状态，就是为后续再用的时候，效率更高
	但是这部分内存是可以回收的，所以，也算在空闲内存中，那么空闲内存的计算公式就可以是这样的
			内存空闲的容量 = free + cache + buff

	
	2）cache与buff的区别
	
	page cache，文件系统层的缓存，从磁盘获取的数据，在内存中创建page cache缓存
		比如第一次grep的时候很慢，第二次就很快，就是因为第一次查找的时候已经在内存中创建了
		page cache。
	buffer cache，从内存中，后续需要写回磁盘的缓存
		系统空闲或者buffer到达一定的大小后统一写回磁盘，可以使用sync命令，立即写回。


	3）哪么内存谁在用？
	cat /proc 补全，就会看到很多数字的目录，一一对应进程的pid
	当然是各种进程对应在内核的数据使用了。	

3，如何评估一个进程的内存使用
	
	cd /proc/pid/
	这里抛出很多内核数据信息，有可能需要超级权限来查看
	比如
		1）statm，查看进程的内存使用
		2）maps，查看进程各依赖库的内存分布
	等等
	但是缺点是没有办法实时检测到dirty page，使用statm可以看到都是0，目前也拥有一些可以参考的开源
	代码来实现dirty page的检测。

4，内存回收

	kswapd内核守护进程，定期检测系统空闲内存的数量。
	










